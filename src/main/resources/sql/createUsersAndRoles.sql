CREATE TABLE USERS(
    ID BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY ,
    USERNAME VARCHAR(128) NOT NULL UNIQUE ,
    PASSWORD varchar(128) NOT NULL CHECK ( length(PASSWORD)>=5 ),
    EMAIL varchar UNIQUE
);
CREATE TABLE ROLES(
    ID INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY ,
    NAME varchar(32) NOT NULL
);

CREATE TABLE USERS_ROLES(
    USER_ID BIGINT REFERENCES USERS(ID) ON DELETE CASCADE,
    ROLE_ID INT REFERENCES ROLES(ID) ON DELETE RESTRICT ,
    PRIMARY KEY (USER_ID,ROLE_ID)
)
INSERT INTO ROLES(NAME)VALUES ('ROLE_USER'),
                              ('ROLE_ADMIN');
INSERT INTO USERS(USERNAME, PASSWORD, EMAIL) VALUES
                                                 ('user','$2a$12$JKgTpvsANupsvX7iFNATsOjnIfwVAn.OaoEqQw7TzmT/wqUUHz3iG','user@mail.ru'),
                                                 ('admin','$2a$12$lNLBBzjhhrYWJAtBV9Tzi.7FLujlYkXhEfbicxT6Cg9j52jt4cIvi', 'admin@gmail.com');

INSERT INTO USERS_ROLES VALUES (1,1),
                               (2,2);